# 代理模式
## 定义
+ 为其他对象提供一种代理，以控制对这个对象的访问
+ 代理对象在客户端与目标对象之间起到中介的作用
## 优点
+ 能够将代理对象与真实被调用的目标对象分离
+ 一定程度上降低了系统的耦合度，扩展性好
+ 可以保护目标对象
+ 对目标对象增强（Spring AOP）
## 缺点
+ 代理模式会再次系统设计中类的数目增加
+ 加入中间层，请求变慢
+ 增加字体的复杂度
## 扩展
+ 静态代理
+ 动态代理
    + JDK动态代理（代理接口,并且只有在程序运行中动态创建的代理类）
    + CGLib动态代理（针对类实现，实现方式是创建一个子类来重写父类的方法，如果是final的就会无法被继承）
## Spring代理选择-扩展
+ 当Spring的Bean有实现接口的时候，Spring就会使用JDK动态代理
+ 当Bean没有实现接口的时候，Spring就会使用CGLib
+ 强制使用CGlib的方法是
```xml
<aop:aspectj-autoproxy proxy-target-class="true"/> 
```
## 代理速度
+ CGLib
    + 使用ASM动态生成字节码（比反射效率高）
+ JDK动态代理

在万次执行测试中，JDK动态代理要比CGLib动态代理快20%左右
## 相关设计模式
+ 装饰者模式
    + 装饰者模式是为对象加上行为
    + 代理模式是控制访问
+ 适配器模式
    + 改变接口